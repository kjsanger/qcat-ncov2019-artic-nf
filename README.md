# qcat ncov2019-artic-nf

This is an analysis pipeline for Oxford Nanopore sequencing data that
comprises two parts; the first part uses Nextflow to run the a
modified version od the qcat de-plexer
(https://github.com/kjsanger/qcat) to separate barcoded reads, while
the second runs another Nextflow pipeline for analysis
(https://github.com/wtsi-team112/ncov2019-artic-nf).

#### Building

This repository hosts its own Conda recipe which will build the
pipeline as a Conda package. The build process will generate and
package the ncov2019-artic-nf Singularity image. Singularity is a
build dependency of the Conda recipe, so it will be installed
automatically for the duration of the build. The user running the
build will need the rights to build Singularity containers using its
[--fakeroot option](https://sylabs.io/guides/3.5/user-guide/fakeroot.html).

A sufficiently recent version of Singularity is available from
the conda-forge Conda channel.

`
$ conda build ./recipe
`

#### Running

Nextflow is a runtime dependency of the Conda package generated by the
recipe and will be installed automatically. This package was tested
using Nextflow installed from the bioconda Conda channel.

The end-to-end pipeline (qcat Nextflow pipeline, ncov2019-artic-nf
Nextflow pipeline, binning output files by barcode) is run by the
qcat-ncov2019-artic-nf.sh script:

`
$ qcat-ncov2019-artic-nf.sh -i /path/to/input -o /path/to/output
`

